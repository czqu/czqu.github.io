<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name="description" content="内容介绍
"><meta name="keywords" content="czq's Blog,  博客, 个人网站, 互联网, java,Linux,Web"><meta name="theme-color" content="#000000"><meta property="og:title" content="h5拼图小游戏 - Czq's Blog"><meta property="og:type" content="article"><meta property="og:description" content="内容介绍
"><meta property="article:published_time" content="2020-11-05T23:00:00Z"><meta property="article:author" content="czq"><meta property="article:tag" content="前端"><meta property="og:image" content="https://czqu.cc/img/avatar-boy.webp"><meta property="og:url" content="https://czqu.cc/h5-ping-tu-1.html"><meta property="og:site_name" content="Czq's Blog"><title>h5拼图小游戏 - Czq's Blog</title><link rel="manifest" href="/pwa/manifest.json"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="canonical" href="https://czqu.cc/h5-ping-tu-1.html"><link rel="stylesheet" href="/css/bootstrap.min.css"><link rel="stylesheet" href="/css/hux-blog.min.css"><link href="/css/font-awesome.min.css" rel="stylesheet" type="text/css"><!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]--><script></script></head><body ontouchstart=""><script src="/js/qin-blog.js" type="text/javascript"></script><nav class="navbar navbar-default navbar-custom navbar-fixed-top"><div class="container-fluid"><div class="navbar-header page-scroll"><button type="button" class="navbar-toggle"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a class="navbar-brand" href="/">Czq's Blog</a></div><div id="huxblog_navbar"><div class="navbar-collapse"><ul class="nav navbar-nav navbar-right"><li><a href="/">Home</a></li><li><a href="/about/">About</a></li><li><a href="/archive/">Archive</a></li></ul></div></div></div></nav><script>var $body=document.body,$toggle=document.querySelector(".navbar-toggle"),$navbar=document.querySelector("#huxblog_navbar"),$collapse=document.querySelector(".navbar-collapse"),__HuxNav__={close:function(){$navbar.className=" ",setTimeout(function(){$navbar.className.indexOf("in")<0&&($collapse.style.height="0px")},400)},open:function(){$collapse.style.height="auto",$navbar.className+=" in"}};$toggle.addEventListener("click",function(e){0<$navbar.className.indexOf("in")?__HuxNav__.close():__HuxNav__.open()}),document.addEventListener("click",function(e){e.target!=$toggle&&"icon-bar"!=e.target.className&&__HuxNav__.close()})</script><style type="text/css">header.intro-header{position:relative;background-image:url(/img/home-bg-notdimmed.webp)}</style><header class="intro-header"><div class="header-mask"></div><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class="post-heading"><div class="tags"><a class="tag" href="/archive/?tag=%E5%89%8D%E7%AB%AF" title="前端">前端</a></div><h1>h5拼图小游戏</h1><h2 class="subheading"></h2><span class="meta">Posted by czq on November 5, 2020</span></div></div></div></div></header><article><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 post-container"><h1 id="内容介绍">内容介绍</h1><h4 id="11-学习内容">1.1 学习内容</h4><p>本项目是基于 HTML+CSS+JavaScript 实现网页版的拼图游戏。实现过程中将用到 HTML5，CSS3 及 JavaScript 相关知识。完成这个项目，可以进一步扎实前端基础知识。</p><p>九宫格拼图相信大家都玩过了，看似简单的小游戏，但实现起来其实并不那么简单。在以前，写程序是程序员的专利，只有他们才能做出一个软件来。但是现在不同了。科技的进步和经济的发展，使得每个人都可以使用计算机。特别是 HTML5 和 CSS3 的流行，使得制作一个基本的游戏变得简单。</p><p>下面我们就来做一个九宫格拼图。它的玩法是移动空格块旁边的方块，使得它们按照方块上面标的数字顺序排好。最终的效果：</p><p><img src="../img/in-post/2020-11-5-h5-ping-tu-1/document-uid920932labid465timestamp1551234014316.png" alt="此处输入图片的描述"></p><h4 id="12-实验知识点">1.2 实验知识点</h4><p>本实验涉及以下知识点：</p><ul><li>HTML5</li><li>CSS3</li><li>JavaScript</li></ul><h4 id="13-实验环境">1.3 实验环境</h4><ul><li>Vscode</li></ul><h4 id="14-适合人群">1.4 适合人群</h4><p>本项目难度一般，适合刚学完前端基础（HTML+CSS+JavaScript）的同学作为练手项目。</p><h4 id="15-代码获取">1.5 代码获取</h4><p>附件：</p><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>puzzle.zip
</pre></td></tr></tbody></table></code></pre></div></div><h1 id="项目原理">项目原理</h1><p>根据下面的效果图来观察思考，我们要做的就是设置一个大 DIV 用来包裹里面的小 DIV，然后在里面设置 8 个小 DIV，从 1 开始给他们编号。右边设置两个按钮，点击开始的时候开始计时，完成拼图后停止计时，并弹出一个框，提示完成了。重来按钮是当用户觉得当前有难度的时候，点击重来可以重新开始一个新的拼图，把所有方块打乱顺序，然后开始计时。</p><p><img src="../img/in-post/2020-11-5-h5-ping-tu-1/document-uid920932labid465timestamp1551234094402.png" alt="此处输入图片的描述"></p><p>我们的重点就是当鼠标点击其中一个方块时，要判断当前方块是否可移动，如果可移动，则移动到相应的位置，如不可移动，则不做任何事。当移动完一块后，要判断是否完成拼图。</p><p>我们把那个大 DIV 想象成一个盒子，它有九个位置，从 1 开始，到 9 编号，他们的位置和编号都是不会变的。把里面的 8 个小 DIV 想象成 8 个小盒子，给他们设置 top 和 left 就可以控制他们的位置。每个小 DIV 从 1 开始到 8 编号。他们的位置是可以随意改变的。所以当小 DIV 的编号和大 DIV 的编号全部重合时，就完成了拼图。</p><p>所以重点就只有一个了。那就是如何判断是否可移动。这个也简单。我们设置一个一维数组变量，用来保存大 DIV 它里面装的小 DIV 的编号。如果大 DIV 没有小方块，也就表面它是空白块，那么就设为 0。如果当前大 DIV 有小 DIV，那就设置为小 DIV 的编号。然后再设置一个二维数组变量，用来保存大 DIV 的可移动编号。也就是保存这个大 DIV 它所有的可去的位置。比如大 DIV 编号为 2 的，它只能向 1 号，3 号，5 号这三个方向移动。又比如 5，它能向 2、4、6、8 这四个方向移动。我们循环遍历这个变量，如果对应的方向它 没有方块，也就是值为 0，那么它就可以往这个方向移动了。</p><h1 id="环境准备">环境准备</h1><p>1.准备相关开发工具</p><p>2.建立下面的目录结构：</p><div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>puzzle
  |__puzzle.html
  |__puzzle.css
  |__puzzle.js
</pre></td></tr></tbody></table></code></pre></div></div><h1 id="实现步骤">实现步骤</h1><h4 id="1编写布局">1.编写布局</h4><p>在<strong>puzzle.html</strong>中我们有下面的代码：</p><div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
</pre></td><td class="rouge-code"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"zh-CN"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;title&gt;</span>Puzzle<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">type=</span><span class="s">"text/css"</span> <span class="na">href=</span><span class="s">"puzzle.css"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">src=</span><span class="s">"puzzle.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"container"</span><span class="nt">&gt;</span>
      <span class="c">&lt;!--最外面的DIV，用来包含里面的结构--&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"game"</span><span class="nt">&gt;</span>
        <span class="c">&lt;!--游戏区，也就是大DIV方块--&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"d1"</span> <span class="na">onclick=</span><span class="s">"move(1)"</span><span class="nt">&gt;</span>1<span class="nt">&lt;/div&gt;</span>
        <span class="c">&lt;!--小DIV，也就是8个小方块。当点击的时候执行move()函数，参数是显示的编号，这样我们就知道点击了那个方块--&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"d2"</span> <span class="na">onclick=</span><span class="s">"move(2)"</span><span class="nt">&gt;</span>2<span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"d3"</span> <span class="na">onclick=</span><span class="s">"move(3)"</span><span class="nt">&gt;</span>3<span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"d4"</span> <span class="na">onclick=</span><span class="s">"move(4)"</span><span class="nt">&gt;</span>4<span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"d5"</span> <span class="na">onclick=</span><span class="s">"move(5)"</span><span class="nt">&gt;</span>5<span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"d6"</span> <span class="na">onclick=</span><span class="s">"move(6)"</span><span class="nt">&gt;</span>6<span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"d7"</span> <span class="na">onclick=</span><span class="s">"move(7)"</span><span class="nt">&gt;</span>7<span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"d8"</span> <span class="na">onclick=</span><span class="s">"move(8)"</span><span class="nt">&gt;</span>8<span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"control"</span><span class="nt">&gt;</span>
        <span class="c">&lt;!--游戏控制区--&gt;</span>
        <span class="nt">&lt;p&gt;</span>
          <span class="nt">&lt;rowspan</span> <span class="na">id=</span><span class="s">"timeText"</span><span class="nt">&gt;</span>总用时<span class="nt">&lt;/rowspan&gt;</span>
          <span class="nt">&lt;rowspan</span> <span class="na">id=</span><span class="s">"timer"</span><span class="nt">&gt;&lt;/rowspan&gt;</span>
        <span class="nt">&lt;/p&gt;</span>
        <span class="c">&lt;!--显示游戏时间区域--&gt;</span>
        <span class="nt">&lt;p&gt;</span>
          <span class="nt">&lt;rowspan</span> <span class="na">id=</span><span class="s">"start"</span> <span class="na">onclick=</span><span class="s">"start()"</span><span class="nt">&gt;</span>开始<span class="nt">&lt;/rowspan&gt;</span>
          <span class="nt">&lt;rowspan</span> <span class="na">id=</span><span class="s">"reset"</span> <span class="na">onclick=</span><span class="s">"reset()"</span><span class="nt">&gt;</span>重来<span class="nt">&lt;/rowspan&gt;</span>
        <span class="nt">&lt;/p&gt;</span>
        <span class="c">&lt;!--显示控制按钮区域--&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div><p>布局文件就写完了。这里为了简化逻辑，更易编写代码，我们把所有操作都封装了。只要执行 move(2)，就是点击了编号为 2 的小方块，后面的一系列操作都完成了。</p><h4 id="2编写样式">2.编写样式</h4><p>布局写完了，现在我们为游戏编写样式，使得它更漂亮。在这一步，大家就可以自己自由发挥了，你可以写出自己的风格，让游戏更漂亮。也可以添加更多的元素来装饰你的游戏。但是注意了，游戏 DIV 的大小如果改变了，一定要记得修改 js 代码，稍后我们会详细讲解。</p><p><strong>puzzle.css</strong></p><div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
</pre></td><td class="rouge-code"><pre><span class="o">*</span> <span class="p">{</span>
  <span class="nl">padding</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
  <span class="nl">margin</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
  <span class="nl">border</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="c">/* *是通配符，给所有的元素去掉默认样式，因为有的浏览器会默认加上一些样式，这可能会给布局带来问题 */</span>
<span class="nt">body</span> <span class="p">{</span>
  <span class="nl">width</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
  <span class="nl">height</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
<span class="p">}</span>
<span class="c">/* 给body设置100%的高度和宽度，这样就会根据浏览器屏幕大小自动适配 */</span>
<span class="nf">#container</span> <span class="p">{</span>
  <span class="nl">position</span><span class="p">:</span> <span class="nb">relative</span><span class="p">;</span>
  <span class="nl">width</span><span class="p">:</span> <span class="m">620px</span><span class="p">;</span>
  <span class="nl">height</span><span class="p">:</span> <span class="m">450px</span><span class="p">;</span>
  <span class="nl">margin</span><span class="p">:</span> <span class="m">0</span> <span class="nb">auto</span><span class="p">;</span>
  <span class="nl">margin-top</span><span class="p">:</span> <span class="m">100px</span><span class="p">;</span>
  <span class="nl">border-radius</span><span class="p">:</span> <span class="m">1px</span><span class="p">;</span>
<span class="p">}</span>
<span class="c">/* 这是包裹所有元素的DIV，给他设置620px的宽和450px的高，这个大小可以设置为更大，但是不能小，至少要能包含里面所有的元素 */</span>
<span class="nf">#game</span> <span class="p">{</span>
  <span class="nl">position</span><span class="p">:</span> <span class="nb">absolute</span><span class="p">;</span>
  <span class="nl">width</span><span class="p">:</span> <span class="m">450px</span><span class="p">;</span>
  <span class="nl">height</span><span class="p">:</span> <span class="m">450px</span><span class="p">;</span>
  <span class="nl">border-radius</span><span class="p">:</span> <span class="m">5px</span><span class="p">;</span>
  <span class="nl">display</span><span class="p">:</span> <span class="n">inline-block</span><span class="p">;</span>
  <span class="nl">background-color</span><span class="p">:</span> <span class="m">#ffe171</span><span class="p">;</span>
  <span class="nl">box-shadow</span><span class="p">:</span> <span class="m">0</span> <span class="m">0</span> <span class="m">10px</span> <span class="m">#ffe171</span><span class="p">;</span>
<span class="p">}</span>
<span class="c">/* 这是游戏区的DIV，这个大小是计算出来的，取决于你的小方块的大小。这里我们设置小方块的大小为150px 150px，所以这个大小是150px*3，为450px */</span>
<span class="nf">#game</span> <span class="nt">div</span> <span class="p">{</span>
  <span class="nl">position</span><span class="p">:</span> <span class="nb">absolute</span><span class="p">;</span>
  <span class="nl">width</span><span class="p">:</span> <span class="m">149px</span><span class="p">;</span>
  <span class="nl">height</span><span class="p">:</span> <span class="m">149px</span><span class="p">;</span>
  <span class="nl">box-shadow</span><span class="p">:</span> <span class="m">1px</span> <span class="m">1px</span> <span class="m">2px</span> <span class="m">#777</span><span class="p">;</span>
  <span class="nl">background-color</span><span class="p">:</span> <span class="m">#20a6fa</span><span class="p">;</span>
  <span class="nl">color</span><span class="p">:</span> <span class="no">white</span><span class="p">;</span>
  <span class="nl">text-align</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
  <span class="nl">font-size</span><span class="p">:</span> <span class="m">150px</span><span class="p">;</span>
  <span class="nl">line-height</span><span class="p">:</span> <span class="m">150px</span><span class="p">;</span>
  <span class="nl">cursor</span><span class="p">:</span> <span class="nb">pointer</span><span class="p">;</span>
  <span class="nl">-webkit-transition</span><span class="p">:</span> <span class="m">0.3s</span><span class="p">;</span> <span class="c">/*浏览器前缀，兼容其他浏览器 chrome*/</span>
  <span class="nl">-moz-transition</span><span class="p">:</span> <span class="m">0.3s</span><span class="p">;</span> <span class="c">/*firefox*/</span>
  <span class="nl">-ms-transition</span><span class="p">:</span> <span class="m">0.3s</span><span class="p">;</span> <span class="c">/*ie*/</span>
  <span class="nl">-o-transition</span><span class="p">:</span> <span class="m">0.3s</span><span class="p">;</span> <span class="c">/*opera*/</span>
  <span class="nl">transition</span><span class="p">:</span> <span class="m">0.3s</span><span class="p">;</span>
<span class="p">}</span>
<span class="c">/* 这就是小方块的大小了，定位为绝对定位，这样改变位置不会影响其他元素的位置。宽高都是149px。注意了，我们还设置了box-shadow:1px 1px 2px #777 ；
它还有边框阴影，所以149px 加上边框1px，它的总宽度是150px 下面的transition：0.3s是设置过渡时间，这是css3的属性，它会让属性改变呈现过渡动画，所以
当我们改变方块的位置时，它会有一个动画，我们不必自己编写动画函数，这回让你疯狂*/</span>
<span class="nf">#game</span> <span class="nt">div</span><span class="nd">:hover</span> <span class="p">{</span>
  <span class="nl">color</span><span class="p">:</span> <span class="m">#ffe171</span><span class="p">;</span>
<span class="p">}</span>
<span class="c">/*给方块设置鼠标悬停动画，当鼠标悬停在元素上面时，会用这里的属性替换上面的属性，移开后又会变为原来的，这里我们是把字体颜色改变*/</span>
<span class="nf">#control</span> <span class="p">{</span>
  <span class="nl">width</span><span class="p">:</span> <span class="m">150px</span><span class="p">;</span>
  <span class="nl">height</span><span class="p">:</span> <span class="m">450px</span><span class="p">;</span>
  <span class="nl">display</span><span class="p">:</span> <span class="n">inline-block</span><span class="p">;</span>
  <span class="nl">float</span><span class="p">:</span> <span class="nb">right</span><span class="p">;</span>
<span class="p">}</span>
<span class="c">/*控制区，display:inline-block会让元素呈现块状元素的特性，使得可以改变大小，同时也会具有行内元素的特性，使得不会占据一行空间，float:right让元素浮动到
右边*/</span>
<span class="nf">#control</span> <span class="nt">rowspan</span> <span class="p">{</span>
  <span class="nl">height</span><span class="p">:</span> <span class="m">25px</span><span class="p">;</span>
  <span class="nl">font-size</span><span class="p">:</span> <span class="m">20px</span><span class="p">;</span>
  <span class="nl">color</span><span class="p">:</span> <span class="m">#222</span><span class="p">;</span>
  <span class="nl">margin-top</span><span class="p">:</span> <span class="m">10px</span><span class="p">;</span>
<span class="p">}</span>
<span class="c">/*设置控制区按钮的共同样式*/</span>
<span class="nf">#start</span> <span class="p">{</span>
  <span class="nl">display</span><span class="p">:</span> <span class="n">inline-block</span><span class="p">;</span>
  <span class="nl">font-size</span><span class="p">:</span> <span class="m">28px</span><span class="p">;</span>
  <span class="nl">width</span><span class="p">:</span> <span class="m">100px</span><span class="p">;</span>
  <span class="nl">height</span><span class="p">:</span> <span class="m">28px</span><span class="p">;</span>
  <span class="nl">background-color</span><span class="p">:</span> <span class="m">#20a6fa</span><span class="p">;</span>
  <span class="nl">color</span><span class="p">:</span> <span class="m">#ffe171</span><span class="p">;</span>
  <span class="nl">text-shadow</span><span class="p">:</span> <span class="m">1px</span> <span class="m">1px</span> <span class="m">2px</span> <span class="m">#ffe171</span><span class="p">;</span>
  <span class="nl">border-radius</span><span class="p">:</span> <span class="m">5px</span><span class="p">;</span>
  <span class="nl">box-shadow</span><span class="p">:</span> <span class="m">2px</span> <span class="m">2px</span> <span class="m">5px</span> <span class="m">#4c98f5</span><span class="p">;</span>
  <span class="nl">text-align</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
  <span class="nl">cursor</span><span class="p">:</span> <span class="nb">pointer</span><span class="p">;</span>
<span class="p">}</span>
<span class="c">/*给start按钮设置属性。cursor:pointer属性让鼠标移到元素上面时会显示不同的鼠标形状，pointer是手型*/</span>
<span class="nf">#reset</span> <span class="p">{</span>
  <span class="nl">display</span><span class="p">:</span> <span class="n">inline-block</span><span class="p">;</span>
  <span class="nl">font-size</span><span class="p">:</span> <span class="m">28px</span><span class="p">;</span>
  <span class="nl">width</span><span class="p">:</span> <span class="m">100px</span><span class="p">;</span>
  <span class="nl">height</span><span class="p">:</span> <span class="m">28px</span><span class="p">;</span>
  <span class="nl">background-color</span><span class="p">:</span> <span class="m">#20a6fa</span><span class="p">;</span>
  <span class="nl">color</span><span class="p">:</span> <span class="m">#ffe171</span><span class="p">;</span>
  <span class="nl">text-shadow</span><span class="p">:</span> <span class="m">1px</span> <span class="m">1px</span> <span class="m">2px</span> <span class="m">#ffe171</span><span class="p">;</span> <span class="c">/*字体阴影*/</span>
  <span class="nl">border-radius</span><span class="p">:</span> <span class="m">5px</span><span class="p">;</span> <span class="c">/*圆角属性*/</span>
  <span class="nl">box-shadow</span><span class="p">:</span> <span class="m">2px</span> <span class="m">2px</span> <span class="m">5px</span> <span class="m">#4c98f5</span><span class="p">;</span> <span class="c">/*盒子阴影*/</span>
  <span class="nl">text-align</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span> <span class="c">/*文字居中*/</span>
  <span class="nl">cursor</span><span class="p">:</span> <span class="nb">pointer</span><span class="p">;</span>
<span class="p">}</span>
<span class="c">/*给Reset按钮设置属性*/</span>
<span class="nf">#d1</span> <span class="p">{</span>
  <span class="nl">left</span><span class="p">:</span> <span class="m">0px</span><span class="p">;</span>
<span class="p">}</span>
<span class="nf">#d2</span> <span class="p">{</span>
  <span class="nl">left</span><span class="p">:</span> <span class="m">150px</span><span class="p">;</span>
<span class="p">}</span>
<span class="nf">#d3</span> <span class="p">{</span>
  <span class="nl">left</span><span class="p">:</span> <span class="m">300px</span><span class="p">;</span>
<span class="p">}</span>
<span class="nf">#d4</span> <span class="p">{</span>
  <span class="nl">top</span><span class="p">:</span> <span class="m">150px</span><span class="p">;</span>
<span class="p">}</span>
<span class="nf">#d5</span> <span class="p">{</span>
  <span class="nl">top</span><span class="p">:</span> <span class="m">150px</span><span class="p">;</span>
  <span class="nl">left</span><span class="p">:</span> <span class="m">150px</span><span class="p">;</span>
<span class="p">}</span>
<span class="nf">#d6</span> <span class="p">{</span>
  <span class="nl">top</span><span class="p">:</span> <span class="m">150px</span><span class="p">;</span>
  <span class="nl">left</span><span class="p">:</span> <span class="m">300px</span><span class="p">;</span>
<span class="p">}</span>
<span class="nf">#d7</span> <span class="p">{</span>
  <span class="nl">top</span><span class="p">:</span> <span class="m">300px</span><span class="p">;</span>
<span class="p">}</span>
<span class="nf">#d8</span> <span class="p">{</span>
  <span class="nl">left</span><span class="p">:</span> <span class="m">150px</span><span class="p">;</span>
  <span class="nl">top</span><span class="p">:</span> <span class="m">300px</span><span class="p">;</span>
<span class="p">}</span>
<span class="c">/*这是预先给每个小方块按照顺序排好位置*/</span>
</pre></td></tr></tbody></table></code></pre></div></div><p>好了，样式也编写好了。最后再编写一个 js 控制代码，我们的拼图就可以用了。编写样式的时候大家还是先根据我这里的来，等完成了整个游戏，了解游戏逻辑的时候你们再自己发挥想象力去更改样式，不然可能会出现未知的错误。</p><p>完成这步，打开 <code class="language-plaintext highlighter-rouge">puzzle.html</code> 应该能看到下面的效果了：</p><p><img src="../img/in-post/2020-11-5-h5-ping-tu-1/puzzle1.png" alt="img"></p><h4 id="3控制代码的编写">3.控制代码的编写</h4><p><strong>puzzle.js</strong></p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">time</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="c1">//保存定时时间</span>
<span class="kd">var</span> <span class="nx">pause</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="c1">//设置是否暂停标志，true表示暂停</span>
<span class="kd">var</span> <span class="nx">set_timer</span><span class="p">;</span>
<span class="c1">//设置定时函数</span>
<span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
<span class="c1">//保存大DIV当前装的小DIV的编号</span>
<span class="kd">var</span> <span class="nx">d_direct</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span>
  <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="c1">//为了逻辑更简单，第一个元素我们不用，我们从下标1开始使用</span>
  <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="c1">//大DIV编号为1的DIV可以去的位置，比如第一块可以去2,4号位置</span>
  <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
  <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span>
  <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span>
  <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span>
  <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">],</span>
  <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span>
  <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">],</span>
  <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>
<span class="p">);</span>
<span class="c1">//保存大DIV编号的可移动位置编号</span>
<span class="kd">var</span> <span class="nx">d_posXY</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span>
  <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="c1">//同样，我们不使用第一个元素</span>
  <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="c1">//第一个表示left,第二个表示top，比如第一块的位置为let:0px,top:0px</span>
  <span class="p">[</span><span class="mi">150</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
  <span class="p">[</span><span class="mi">300</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
  <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">150</span><span class="p">],</span>
  <span class="p">[</span><span class="mi">150</span><span class="p">,</span> <span class="mi">150</span><span class="p">],</span>
  <span class="p">[</span><span class="mi">300</span><span class="p">,</span> <span class="mi">150</span><span class="p">],</span>
  <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">300</span><span class="p">],</span>
  <span class="p">[</span><span class="mi">150</span><span class="p">,</span> <span class="mi">300</span><span class="p">],</span>
  <span class="p">[</span><span class="mi">300</span><span class="p">,</span> <span class="mi">300</span><span class="p">]</span>
<span class="p">);</span>
<span class="c1">//大DIV编号的位置</span>
<span class="nx">d</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="nx">d</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="nx">d</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="nx">d</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
<span class="nx">d</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="nx">d</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mi">6</span><span class="p">;</span>
<span class="nx">d</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mi">7</span><span class="p">;</span>
<span class="nx">d</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="mi">8</span><span class="p">;</span>
<span class="nx">d</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="c1">//默认按照顺序排好，大DIV第九块没有，所以为0，我们用0表示空白块</span>

<span class="kd">function</span> <span class="nx">move</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">//移动函数，前面我们已将讲了</span>
  <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">==</span> <span class="nx">id</span><span class="p">)</span> <span class="k">break</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="c1">//这个for循环是找出小DIV在大DIV中的位置</span>
  <span class="kd">var</span> <span class="nx">target_d</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="c1">//保存小DIV可以去的编号，0表示不能移动</span>
  <span class="nx">target_d</span> <span class="o">=</span> <span class="nx">whereCanTo</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
  <span class="c1">//用来找出小DIV可以去的位置，如果返回0，表示不能移动，如果可以移动，则返回可以去的位置编号</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">target_d</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">d</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="c1">//把当前的大DIV编号设置为0，因为当前小DIV已经移走了，所以当前大DIV就没有装小DIV了</span>
    <span class="nx">d</span><span class="p">[</span><span class="nx">target_d</span><span class="p">]</span> <span class="o">=</span> <span class="nx">id</span><span class="p">;</span>
    <span class="c1">//把目标大DIV设置为被点击的小DIV的编号</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">d</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">id</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">left</span> <span class="o">=</span> <span class="nx">d_posXY</span><span class="p">[</span><span class="nx">target_d</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">px</span><span class="dl">'</span><span class="p">;</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">d</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">id</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">top</span> <span class="o">=</span> <span class="nx">d_posXY</span><span class="p">[</span><span class="nx">target_d</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">px</span><span class="dl">'</span><span class="p">;</span>
    <span class="c1">//最后设置被点击的小DIV的位置，把它移到目标大DIV的位置</span>
  <span class="p">}</span>
  <span class="c1">//如果target_d不为0，则表示可以移动，且target_d就是小DIV要去的大DIV的位置编号</span>
  <span class="kd">var</span> <span class="nx">finish_flag</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
  <span class="c1">//设置游戏是否完成标志，true表示完成</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">k</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">k</span> <span class="o">&lt;</span> <span class="mi">9</span><span class="p">;</span> <span class="o">++</span><span class="nx">k</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="nx">k</span><span class="p">]</span> <span class="o">!=</span> <span class="nx">k</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">finish_flag</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="k">break</span><span class="p">;</span>
      <span class="c1">//如果大DIV保存的编号和它本身的编号不同，则表示还不是全部按照顺序排的，那么设置为false，跳出循环，后面不用再判断了，因为只要一个不符，就没完成游戏</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="c1">//从1开始，把每个大DIV保存的编号遍历一下，判断是否完成</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">finish_flag</span> <span class="o">==</span> <span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">pause</span><span class="p">)</span> <span class="nx">start</span><span class="p">();</span>
    <span class="nx">alert</span><span class="p">(</span><span class="dl">'</span><span class="s1">congratulation</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="c1">//如果为true，则表示游戏完成，如果当前没有暂停，则调用暂停韩式，并且弹出提示框，完成游戏。</span>
  <span class="c1">//start()这个函数是开始，暂停一起的函数，如果暂停，调用后会开始，如果开始，则调用后会暂停</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">whereCanTo</span><span class="p">(</span><span class="nx">cur_div</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">//判断是否可移动函数，参数是大DIV的编号，不是小DIV的编号，因为小DIV编号跟可以去哪没关系，小DIV是会动的</span>
  <span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">move_flag</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">d_direct</span><span class="p">[</span><span class="nx">cur_div</span><span class="p">].</span><span class="nx">length</span><span class="p">;</span> <span class="o">++</span><span class="nx">j</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//把所有可能去的位置循环遍历一下</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="nx">d_direct</span><span class="p">[</span><span class="nx">cur_div</span><span class="p">][</span><span class="nx">j</span><span class="p">]]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">move_flag</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">//如果目标的值为0，说明目标位置没有装小DIV，则可以移动，跳出循环</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">move_flag</span> <span class="o">==</span> <span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d_direct</span><span class="p">[</span><span class="nx">cur_div</span><span class="p">][</span><span class="nx">j</span><span class="p">];</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="c1">//可以移动，则返回目标位置的编号，否则返回0，表示不可移动</span>
<span class="p">}</span>

<span class="c1">//定时函数，每一秒执行一次</span>
<span class="kd">function</span> <span class="nx">timer</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">time</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">//一秒钟加一，单位是秒</span>
  <span class="kd">var</span> <span class="nx">min</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">time</span> <span class="o">/</span> <span class="mi">60</span><span class="p">);</span> <span class="c1">//把秒转换为分钟，一分钟60秒，取商就是分钟</span>
  <span class="kd">var</span> <span class="nx">sec</span> <span class="o">=</span> <span class="nx">time</span> <span class="o">%</span> <span class="mi">60</span><span class="p">;</span> <span class="c1">//取余就是秒</span>
  <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">timer</span><span class="dl">'</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">min</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">分</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">sec</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">秒</span><span class="dl">'</span><span class="p">;</span> <span class="c1">//然后把时间更新显示出来</span>
<span class="p">}</span>

<span class="c1">//开始暂停函数</span>
<span class="kd">function</span> <span class="nx">start</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">pause</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">start</span><span class="dl">'</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">暂停</span><span class="dl">'</span><span class="p">;</span> <span class="c1">//把按钮文字设置为暂停</span>
    <span class="nx">pause</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span> <span class="c1">//暂停表示设置为false</span>
    <span class="nx">set_timer</span> <span class="o">=</span> <span class="nx">setInterval</span><span class="p">(</span><span class="nx">timer</span><span class="p">,</span> <span class="mi">1000</span><span class="p">);</span> <span class="c1">//启动定时</span>
    <span class="c1">//如果当前是暂停，则开始</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">start</span><span class="dl">'</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">开始</span><span class="dl">'</span><span class="p">;</span>
    <span class="nx">pause</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="nx">clearInterval</span><span class="p">(</span><span class="nx">set_timer</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">//重置函数</span>
<span class="kd">function</span> <span class="nx">reset</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">time</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">//把时间设置为0</span>
  <span class="nx">random_d</span><span class="p">();</span> <span class="c1">//把方块随机打乱函数</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">pause</span><span class="p">)</span>
    <span class="c1">//如果暂停，则开始计时</span>
    <span class="nx">start</span><span class="p">();</span>
<span class="p">}</span>

<span class="c1">//随机打乱方块函数，我们的思路是从第九块开始，随机生成一个数，然后他们两块对调一下</span>
<span class="kd">function</span> <span class="nx">random_d</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">9</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">;</span> <span class="o">--</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">to</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="p">(</span><span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span> <span class="c1">//产生随机数，范围为1到i，不能超出范围，因为没这个id的DIV</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">d</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">d</span><span class="p">[</span><span class="nx">i</span><span class="p">]).</span><span class="nx">style</span><span class="p">.</span><span class="nx">left</span> <span class="o">=</span> <span class="nx">d_posXY</span><span class="p">[</span><span class="nx">to</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">px</span><span class="dl">'</span><span class="p">;</span>
      <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">d</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">d</span><span class="p">[</span><span class="nx">i</span><span class="p">]).</span><span class="nx">style</span><span class="p">.</span><span class="nx">top</span> <span class="o">=</span> <span class="nx">d_posXY</span><span class="p">[</span><span class="nx">to</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">px</span><span class="dl">'</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">//把当前的DIV位置设置为随机产生的DIV的位置</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="nx">to</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">d</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">d</span><span class="p">[</span><span class="nx">to</span><span class="p">]).</span><span class="nx">style</span><span class="p">.</span><span class="nx">left</span> <span class="o">=</span> <span class="nx">d_posXY</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">px</span><span class="dl">'</span><span class="p">;</span>
      <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">d</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">d</span><span class="p">[</span><span class="nx">to</span><span class="p">]).</span><span class="nx">style</span><span class="p">.</span><span class="nx">top</span> <span class="o">=</span> <span class="nx">d_posXY</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">px</span><span class="dl">'</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">//把随机产生的DIV的位置设置为当前的DIV的位置</span>
    <span class="kd">var</span> <span class="nx">tem</span> <span class="o">=</span> <span class="nx">d</span><span class="p">[</span><span class="nx">to</span><span class="p">];</span>
    <span class="nx">d</span><span class="p">[</span><span class="nx">to</span><span class="p">]</span> <span class="o">=</span> <span class="nx">d</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
    <span class="nx">d</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">tem</span><span class="p">;</span>
    <span class="c1">//然后把它们两个的DIV保存的编号对调一下</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">//初始化函数，页面加载的时候调用重置函数，重新开始</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="nx">reset</span><span class="p">();</span>
<span class="p">};</span>
</pre></td></tr></tbody></table></code></pre></div></div><p>好了，所有代码都已经编写完成了。现在点击桌面上的 <code class="language-plaintext highlighter-rouge">puzzle.html</code> 文件，使用 浏览器 打开，就能看到效果了。点击上面的方块就可以移动。</p><h1 id="总结">总结</h1><p>通过此项目，我们利用 HTML5 + CSS3 + JavaScript，实现了一个简单的拼图游戏。</p><p>这里说明一下，因为实验中使用的随机打乱方块的算法非常简单，但是存在 bug，有 50% 的概率生成的顺序是无法复原的，这个时候就只能点击重新开始。</p><hr style="visibility:hidden"><ul class="pager"><li class="previous"><a href="/mysql-note-a04.html" data-toggle="tooltip" data-placement="top" title="MySQL学习笔记高级篇（四）">Previous<br><span>MySQL学习笔记高级篇（四）</span></a></li><li class="next"><a href="/Do-not-Tap-The-White-Tile.html" data-toggle="tooltip" data-placement="top" title="h5别踩白块游戏">Next<br><span>h5别踩白块游戏</span></a></li></ul><hr style="visibility:hidden"><div id="disqus_comment" class="comment"><div id="disqus_thread" class="disqus-thread"></div></div></div><div class="col-lg-2 col-lg-offset-0 visible-lg-block sidebar-container catalog-container"><div class="side-catalog"><hr class="hidden-sm hidden-xs"><h5><a class="catalog-toggle" href="#">CATALOG</a></h5><ul class="catalog-body"></ul></div></div><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 sidebar-container"><div class="dropdown navbar-form navbar-right"><input id="search-input" name="word" type="text" aria-haspopup="true" aria-expanded="false" data-toggle="dropdown" class="form-control typeahead" placeholder="搜索"><ul class="dropdown-menu" aria-labelledby="dLabel" id="results-container"></ul></div><script src="/js/simple-jekyll-search.js" type="text/javascript"></script><script>window.simpleJekyllSearch=new SimpleJekyllSearch({searchInput:document.getElementById("search-input"),resultsContainer:document.getElementById("results-container"),json:"/search.json",searchResultTemplate:'<li><a href="{url}" title="{desc}">{title}</a></li>',noResultsText:"没有搜索到文章",limit:20,fuzzy:!0})</script><section><hr class="hidden-sm hidden-xs"><h5><a href="/archive/">FEATURED TAGS</a></h5><div class="tags"><a data-sort="0023" href="/archive/?tag=Linux" title="Linux" rel="3">Linux</a> <a data-sort="0018" href="/archive/?tag=cpp" title="cpp" rel="8">cpp</a> <a data-sort="0020" href="/archive/?tag=%E5%90%8E%E7%AB%AF" title="后端" rel="6">后端</a> <a data-sort="0020" href="/archive/?tag=%E7%AE%97%E6%B3%95" title="算法" rel="6">算法</a> <a data-sort="0022" href="/archive/?tag=%E6%80%A7%E8%83%BD" title="性能" rel="4">性能</a> <a data-sort="0022" href="/archive/?tag=%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84" title="数据结构" rel="4">数据结构</a> <a data-sort="0022" href="/archive/?tag=mysql" title="mysql" rel="4">mysql</a> <a data-sort="0024" href="/archive/?tag=%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8" title="信息安全" rel="2">信息安全</a> <a data-sort="0024" href="/archive/?tag=%E5%89%8D%E7%AB%AF" title="前端" rel="2">前端</a> <a data-sort="0024" href="/archive/?tag=java" title="java" rel="2">java</a> <a data-sort="0024" href="/archive/?tag=kali" title="kali" rel="2">kali</a> <a data-sort="0024" href="/archive/?tag=linux" title="linux" rel="2">linux</a></div></section><hr><h5>FRIENDS</h5><ul class="list-inline"><li><a href="https://2084team.cn/">2084 Team</a></li></ul></div></div><div class="row"><div id="gitmentContainer"></div><script src="/js/gitment.browser.js"></script><link rel="stylesheet" href="/css/default.css"></div></div></article><script type="text/javascript">var disqus_shortname="donaldxy",disqus_identifier="/h5-ping-tu-1",disqus_url="https://czqu.cc/h5-ping-tu-1.html";!function(){if(is_global){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}else document.getElementById("disqus_comment").style.display="none"}()</script><script>if(is_global)document.getElementById("gitmentContainer").style.display="none";else{var gitment=new Gitment({id:"/h5-ping-tu-1.html",owner:"czqu",repo:"czqu.github.io",oauth:{client_id:"23a9781cae2172c5d591",client_secret:"4493f8b5c72f024f1a7b79d556b7e43599f918ed"}});gitment.render("gitmentContainer")}</script><script>function async(e,n){var t=document,a="script",r=t.createElement(a),c=t.getElementsByTagName(a)[0];r.src=e,n&&r.addEventListener("load",function(e){n(null,e)},!1),c.parentNode.insertBefore(r,c)}</script><script>async("/js/anchor.min.js",function(){anchors.options={visible:"hover",placement:"right"},anchors.add().remove(".intro-header h1").remove(".subheading").remove(".sidebar-container h5")})</script><style>@media all and (min-width:800px){.anchorjs-link{position:absolute;left:-.75em;font-size:1.1em;margin-top:-.1em}}</style><footer><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center"><li><a id="rss" href="/feed.xml"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-rss fa-stack-1x fa-inverse"></i></span></a></li><li><a target="_blank" href="https://www.zhihu.com/people/czqu"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-stack-1x fa-inverse">知</i></span></a></li><li><a target="_blank" href="https://blog.csdn.net/weixin_44409903"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-stack-1x fa-inverse">C</i></span></a></li></ul><p class="copyright text-muted">Copyright &copy; Czq's Blog 2020<br><a id="switchsite" href="https://blog.xiyuan.ren/">国内访问</a> &nbsp; &nbsp;&nbsp; <a href="/license.html">许可协议 License</a><br><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_site_pv">&nbsp;本站总访问量&nbsp;<span id="busuanzi_value_site_pv"></span>&nbsp;次&nbsp;</span><span id="busuanzi_container_site_uv"> &nbsp;访客数&nbsp;<span id="busuanzi_value_site_uv"></span>&nbsp;人次</span><script type="text/javascript">var linkobj=document.getElementById("switchsite");current_url=window.location.href,is_global?(target_url=replacedomain(current_url,document.domain,"blog.czqu.ren"),linkobj.href=target_url,linkobj.innerText="国内访问"):(target_url=replacedomain(current_url,document.domain,"czqu.cc"),linkobj.href=target_url,linkobj.innerText="海外访问")</script></p></div></div></div></footer><script src="/js/jquery.min.js"></script><script src="/js/bootstrap.min.js"></script><script src="/js/hux-blog.min.js"></script><script src="/js/snackbar.js"></script><script src="/js/sw-registration.js"></script><script>function async(e,n){var t=document,a="script",r=t.createElement(a),c=t.getElementsByTagName(a)[0];r.src=e,n&&r.addEventListener("load",function(e){n(null,e)},!1),c.parentNode.insertBefore(r,c)}</script><script>async("/js/fastclick.min.js",function(){var c=document.querySelector("nav");c&&FastClick.attach(c)})</script><script>var _gaId="UA-171260366-1",_gaDomain="czqu.cc";_gaDomain=is_global?(_gaId="UA-171260366-1","czqu.cc"):(_gaId="UA-171260366-2","blog.czqu.ren"),function(a,e,g,c,n,o,t){a.GoogleAnalyticsObject=n,a.ga=a.ga||function(){(a.ga.q=a.ga.q||[]).push(arguments)},a.ga.l=1*new Date,o=e.createElement(g),t=e.getElementsByTagName(g)[0],o.async=1,o.src="//www.google-analytics.com/analytics.js",t.parentNode.insertBefore(o,t)}(window,document,"script",0,"ga"),ga("create",_gaId,_gaDomain),ga("send","pageview")</script><script>var _baId="202567f05f85026a62a117eec19b4a09",linkobj=document.getElementById("switchsite");_baId=is_global?"202567f05f85026a62a117eec19b4a09":"496677e3ceac55257d74003c6c3c2f3b";var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="//hm.baidu.com/hm.js?"+_baId;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(e,a)}()</script><script type="text/javascript">function generateCatalog(e){var a,l,n,t,o,c;return _containerSelector="div.post-container",a=$(_containerSelector).find("h1,h2,h3,h4,h5,h6"),$(e).html(""),a.each(function(){l=$(this).prop("tagName").toLowerCase(),o="#"+$(this).prop("id"),n=$(this).text(),c=$('<a href="'+o+'" rel="nofollow">'+n+"</a>"),t=$('<li class="'+l+'_nav"></li>').append(c),$(e).append(t)}),!0}generateCatalog(".catalog-body"),$(".catalog-toggle").click(function(e){e.preventDefault(),$(".side-catalog").toggleClass("fold")}),async("/js/jquery.nav.js",function(){$(".catalog-body").onePageNav({currentClass:"active",changeHash:!1,easing:"swing",filter:"",scrollSpeed:700,scrollOffset:0,scrollThreshold:.2,begin:null,end:null,scrollChange:null,padding:80})})</script><img src="/img/icon_wechat.png" width="0" height="0"></body></html>